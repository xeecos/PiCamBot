<html>
<head>
<style type="text/css" >
body { 
	text-align: center;
	margin:30px 0;
	-webkit-user-select: none;
	-webkit-touch-callout:none;
}
.center { 
	margin:0 auto; 
}
</style>
	
</head>
<body>

	<div class="center" style="width:640px;height:480px;border:1px solid #ccc">
		<canvas id="canvas-video" width="640" height="480"></canvas>
	</div>
	<div class="center" style="margin-top:20px;width:640px;height:240px;border:1px solid #ccc">
		<canvas id="canvas-cube" width="640" height="240"></canvas>
	</div>
	<script src="/jsmpg.js"></script>
	<script src="/color.js"></script>
	<script src="jquery.js" type="text/javascript"></script>

	<script type="text/javascript">
		// CHANGE THIS TO THE APPROPRIATE WS ADDRESS
		var domain = window.location.href.split("//")[1].split(":")[0];
		var wsUrl = 'ws://'+domain+':8084/';

		// Show loading notice
		var canvas = document.getElementById('canvas-video');
		var ctx = canvas.getContext('2d');
		ctx.fillStyle = '#333';
		ctx.fillText('Loading...', canvas.width/2-30, canvas.height/3);

		// Start the player
		var client = new WebSocket(wsUrl);
		var player = new jsmpeg(client, { canvas:canvas });
		$("#canvas-video").click(function (e) {
			var canvasOffset = $("#canvas-video").offset();
			var canvasX = Math.floor(e.pageX - canvasOffset.left);
			var canvasY = Math.floor(e.pageY - canvasOffset.top);
			var colorData = canvas.getPixelColor(canvasX, canvasY);
			var color = colorData.rgb;
			console.log(color);
		});
	</script>
</body>
</html>
